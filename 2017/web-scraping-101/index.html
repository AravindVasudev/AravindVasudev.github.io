<!doctype html><html prefix="og: http://ogp.me/ns#"><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Web Scraping 101 : Build a simple web scraper using PHP &#183; </title><meta name=description content="There are times when we want to extract data from a website. In most cases,
you are provided with an API, but that&rsquo;s not always plausible. So, when a website
does not provide an API, the only way to get the data from the website is to scrape it off yourself.
In this tutorial, we are going to build a simple scraper using PHP to extract data from Wikipedia
(I&rsquo;d highly recommend you to use Wikipedia API over this.
This is just for the tutorial purpose.) and another scraper that extracts
Anna University result."><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=generator content="Hugo 0.146.6"><meta name=robots content="index,follow"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:title" content="Web Scraping 101 : Build a simple web scraper using PHP"><meta property="og:description" content="There are times when we want to extract data from a website. In most cases,
you are provided with an API, but that&rsquo;s not always plausible. So, when a website
does not provide an API, the only way to get the data from the website is to scrape it off yourself.
In this tutorial, we are going to build a simple scraper using PHP to extract data from Wikipedia
(I&rsquo;d highly recommend you to use Wikipedia API over this.
This is just for the tutorial purpose.) and another scraper that extracts
Anna University result."><meta property="og:type" content="article"><meta property="og:url" content="/2017/web-scraping-101/"><link rel=stylesheet href=/dist/site.css><link rel=stylesheet href=/dist/syntax.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300&subset=latin,cyrillic-ext,latin-ext,cyrillic"><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css integrity=sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN crossorigin=anonymous></head><body><div id=wrapper><header class=site-header><div class=container><div class=site-title-wrapper><h1 class=site-title><a href=/>Blog</a></h1><a class=button-square href=/index.xml aria-label=RSS><i class="fa fa-rss" aria-hidden=true></i></a>
<a class="button-square button-social hint--top" data-hint=Github aria-label=Github href=https://github.com/AravindVasudev rel=me><i class="fa fa-github-alt" aria-hidden=true></i>
</a><a class="button-square button-social hint--top" data-hint=LinkedIn aria-label=LinkedIn href=https://linkedin.com/in/aravindvasudev/ rel=me><i class="fa fa-linkedin" aria-hidden=true></i>
</a><a class="button-square button-social hint--top" data-hint=Email aria-label="Send an Email" href=mailto:aravind_vasudevan@outlook.com><i class="fa fa-envelope" aria-hidden=true></i></a></div><ul class=site-nav><li class=site-nav-item><a href=/>Blog</a></li><li class=site-nav-item><a href=/misc/>Misc</a></li><li class=site-nav-item><a href=/about/>About</a></li></ul></div></header><div id=container><div class=container><article class=post-container itemscope itemtype=http://schema.org/BlogPosting><header class=post-header><h1 class=post-title itemprop="name headline">Web Scraping 101 : Build a simple web scraper using PHP</h1><p class=post-date><span>Published <time datetime=2017-01-13 itemprop=datePublished>Fri, Jan 13, 2017</time></span>
<span>by</span>
<span itemscope itemprop=author itemtype=https://schema.org/Person><span itemprop=name><a href=# itemprop=url rel=author></a></span></span></p><p class="post-reading post-line"><span>Estimated reading time: 4 min</span></p></header><div class="post-content clearfix" itemprop=articleBody><p>There are times when we want to extract data from a website. In most cases,
you are provided with an API, but that&rsquo;s not always plausible. So, when a website
does not provide an API, the only way to get the data from the website is to scrape it off yourself.</p><p>In this tutorial, we are going to build a simple scraper using PHP to extract data from Wikipedia
(I&rsquo;d highly recommend you to use <a href=https://www.mediawiki.org/wiki/API:Main_page>Wikipedia API</a> over this.
This is just for the tutorial purpose.) and another scraper that extracts
Anna University result.</p><p><img src=/images/blog/web_scraping.jpg alt></p><p>There are various external libraries such as Simple HTML DOM and cURL,
which I highly recommend you to check out after this tutorial, but we are going to
proceed with simple raw PHP.</p><p>Before you proceed, remember that Web Scraping is definitely a gray area. So,
make sure you are not breaking terms and conditions of the site you are scraping
the data off. This tutorial is just for educational purpose.</p><hr><h2 id=simple-wikipedia-scraper>Simple Wikipedia Scraper</h2><p>We are going to do this in 3 simple steps:</p><h3 id=step-1-get-the-content>Step 1: Get the content</h3><p>First, we have to pull the content off the Wikipedia page. For this, we use <a href=http://php.net/manual/en/function.file-get-contents.php><code>file_get_contents()</code></a>
function, which is used to retrieve the content of a file using its URL. It takes in
a URL of a file and returns its content.</p><p>The above code returns the content of the Wikipedia page as a string which
the browser interprets as something like this:</p><p><img src=/images/blog/wikiscraper_1.png alt></p><h3 id=step-2-parse-the-string-as-dom>Step 2: Parse the string as DOM</h3><p>DOM stands for <a href=https://www.w3.org/TR/1998/WD-DOM-19980720/introduction.html><code>Document Object Model</code></a>.
It defines the logical structure of documents and the way a document is accessed
and manipulated. In simple words, it generates a tree like structure to access the
data in it. It is used by the browser to parse HTML into displayable content.
<img src=/images/blog/dom.gif alt></p><p><code>$url</code> can be converted to DOM using <a href=http://php.net/manual/en/class.domdocument.php><code>DOMDocument</code></a>
class in PHP.</p><p><code>DOMDocument's</code> constructor takes in <code>XML version</code> and <code>encoding</code> as parameters.
Don&rsquo;t worry if you don&rsquo;t know what they are, just use the line below:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=vg>$dom</span>  <span class=o>=</span> <span class=kp>new</span> <span class=no>DOMDocument</span><span class=p>(</span><span class=s1>&#39;1.0&#39;</span><span class=p>,</span> <span class=s1>&#39;UTF-8&#39;</span><span class=p>);</span>
</span></span></code></pre></div><p>The <a href=http://php.net/manual/en/domdocument.loadhtml.php><code>loadHTML()</code></a> method of
DOMDocument takes in the content and creates a DOM.</p><p>Note: If you&rsquo;re new to PHP classes, they are very similar to the ones in C++ and Java.
The only difference you have to know to continue this tutorial is that PHP uses
<code>-></code> instead of <code>.</code> to access class members.</p><h3 id=step-3-scrape-the-data>Step 3: Scrape the data</h3><p>This is the part where you have to use your brain. Since every website is not built
the same way, you have to know your way through the website&rsquo;s structure. To do this,
just try going through the website&rsquo;s source to determine the appropriate <code>selectors</code>
to crack into the data.</p><p>For example,
if you go through <a href=https://en.wikipedia.org/wiki/Web_scraping><code>https://en.wikipedia.org/wiki/Web_scraping</code></a> &rsquo;s
source, you can see that the title has an ID of <code>#firstHeading</code>.</p><p><img src=/images/blog/wikiscraper_2.png alt></p><p>We can retrieve a DOM Element with its ID using <a href=http://php.net/manual/en/domdocument.getelementbyid.php><code>getElementById</code></a> method. <code>getElementById()</code> method returns an object of <a href=http://php.net/manual/en/class.domelement.php><code>DOMElement</code></a> type.</p><p>The content inside a <code>DOMElement</code> is stored in <code>nodeValue</code> attribute.</p><p><img src=/images/blog/wikiscraper_3.png alt></p><p>Next, We&rsquo;re going to extract the first paragraph of the Wikipedia page. Going
through the source again, we can see that the first paragraph is within a <code>p tag</code>
inside <code>#mw-content-text</code>.</p><p><a href=http://php.net/manual/en/domelement.getelementsbytagname.php><code>getElementsByTagName</code></a>
rerurns a <a href=http://php.net/manual/en/class.domnodelist.php><code>DOMNodeList</code></a> object,
which is a collection of <code>DOMElement</code> objects ordered, which can be accessed using
<code>item()</code> method.</p><p>In the example, the first paragraph is returned by <code>item(0)</code>. Like how we did in
the title, we extract the text using <code>nodeValue</code> attribute.</p><p><img src=/images/blog/wikiscraper_4.png alt></p><p>That&rsquo;s it! We have successfully scraped data off the Wikipedia page.</p><p>Try going through the documentation to get a clearer picture. If you find the
documentation difficult, I&rsquo;d recommend you to go with some library. If you have
any problem following the tutorial, please do post it in the comments below.</p><p><img src=/images/blog/read_the_docs.jpg alt></p><p>The <a href=../web-scraping-101-part2/>part 2</a> of this tutorial continues on a real world example of scraping
the Anna University website for result into an excel file. If you liked this, please do check
this out: <a href=../web-scraping-101-part2/>Web Scraping 101: Anna University Result Scraper</a></p></div><footer class="post-footer clearfix"><p class=post-tags><span>Tagged:</span>
<a href=/tags/php/>php</a>,
<a href=/tags/web-scraping/>web scraping</a></p><div class=share><a class=icon-linkedin href="https://www.linkedin.com/shareArticle?mini=true&title=Web%20Scraping%20101%20%3a%20Build%20a%20simple%20web%20scraper%20using%20PHP&url=%2f2017%2fweb-scraping-101%2f&summary=" onclick='return window.open(this.href,"linkedin-share","width=554,height=481"),!1' aria-label="Share on LinkedIn"><i class="fa fa-linkedin" aria-hidden=true></i></a></div></footer></article></div></div></div><footer class=footer><div class=container><div class=site-title-wrapper><h1 class=site-title><a href=/>Blog</a></h1><a class="button-square button-jump-top js-jump-top" href=# aria-label="Back to Top"><i class="fa fa-angle-up" aria-hidden=true></i></a></div><p class=footer-copyright><span>&copy; 2024 / Powered by <a href=https://gohugo.io/>Hugo</a></span></p><p class=footer-copyright><span>SEND ANY CORRECTIONS/OPINIONS TO ARAVIND_VASUDEVAN [AT] OUTLOOK [DOT] COM</span></p></div></footer><script src=/js/jquery-1.11.3.min.js></script><script src=/js/jquery.fitvids.js></script><script src=/js/scripts.js></script></body></html>