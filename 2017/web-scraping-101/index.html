<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Web Scraping 101 : Build a simple web scraper using PHP</title>
  <meta name="description" content="Student · Full Stack Developer · Machine Learning Enthusiast">
  <meta name="author" content="Aravind Vasudevan">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Aravind Vasudevan | Yet another programmer's blog">
  <meta name="twitter:description" content="Student · Full Stack Developer · Machine Learning Enthusiast">

  <meta property="og:type" content="article">
  <meta property="og:title" content="Aravind Vasudevan | Yet another programmer's blog">
  <meta property="og:description" content="Student · Full Stack Developer · Machine Learning Enthusiast">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicons/favicon-16x16.png">
  <link rel="manifest" href="/images/favicons/manifest.json">
  <link rel="mask-icon" href="/images/favicons/safari-pinned-tab.svg" color="#212121">
  <link rel="shortcut icon" href="/images/favicons/favicon.ico">
  <meta name="apple-mobile-web-app-title" content="Aravind Vasudevan">
  <meta name="application-name" content="Aravind Vasudevan">
  <meta name="msapplication-config" content="/images/favicons/browserconfig.xml">
  <meta name="theme-color" content="#212121">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://aravindvasudevan.me//2017/web-scraping-101/">
  <link rel="alternate" type="application/rss+xml" title="Aravind Vasudevan | Yet another programmer's blog" href="/feed.xml">

    <!-- Enforce SSL -->
  <script type="text/javascript">
    var host = "aravindvasudevan.me";
    if ((host == window.location.host) && (window.location.protocol != "https:"))
        window.location.protocol = "https";
  </script>
</head>


  <body>
    <span class="mobile btn-mobile-menu">
  <i class="icon icon-list btn-mobile-menu__icon"></i>
  <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
</span>

<header class="panel-cover" style="background-image: url(/images/cover.jpg)">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">
        <a href="/" title="link to home of Aravind Vasudevan | Yet another programmer's blog">
          <img src="/images/profile.jpg" class="user-image" alt="My Profile Photo">
          <h1 class="panel-cover__title panel-title">Aravind Vasudevan</h1>
        </a>
        <hr class="panel-cover__divider">
        <p class="panel-cover__description">Student · Full Stack Developer · Machine Learning Enthusiast</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary">

        <div class="navigation-wrapper">

          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="/#blog" title="link to blog" class="blog-button">Blog</a></li>
            </ul>
          </nav>

          <nav class="cover-navigation navigation--social">
            <ul class="navigation">

            

            

            
              <!-- LinkedIn -->
              <li class="navigation__item">
                <a href="https://www.linkedin.com/in/aravindvasudev" title="aravindvasudev on LinkedIn" target="_blank">
                  <i class="icon icon-social-linkedin"></i>
                  <span class="label">LinkedIn</span>
                </a>
              </li>
            

            
              <!-- GitHub -->
              <li class="navigation__item">
                <a href="https://www.github.com/AravindVasudev" title="AravindVasudev on GitHub" target="_blank">
                  <i class="icon icon-social-github"></i>
                  <span class="label">GitHub</span>
                </a>
              </li>
            

            
              <!-- Email -->
              <li class="navigation__item">
                <a href="mailto:email@aravindvasudevan.me" title="Email email@aravindvasudevan.me" target="_blank">
                  <i class="icon icon-mail"></i>
                  <span class="label">Email</span>
                </a>
              </li>
            

            <!-- RSS -->
            <li class="navigation__item">
              <a href="/feed.xml" title="Subscribe" target="_blank">
                <i class="icon icon-rss"></i>
                <span class="label">RSS</span>
              </a>
            </li>

            </ul>
          </nav>

          <!-- About Me Page -->
          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="/about/" title="About Me" class="blog-button">About Me</a></li>
            </ul>
          </nav>

        </div>

      </div>

    </div>

    <div class="panel-cover--overlay"></div>
  </div>
</header>


    <div class="content-wrapper">
      <div class="content-wrapper__inner">
        <article class="post-container post-container--single">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="13 Jan 2017" class="post-meta__date date">13 Jan 2017</time> &#8226; <span class="post-meta__tags">on <a href="/tags/#php">php</a> <a href="/tags/#web scraping">web scraping</a> </span>
    </div>
    <h1 class="post-title">Web Scraping 101 : Build a simple web scraper using PHP</h1>
  </header>

  <section class="post">
    <p>There are times when we want to extract data from a website. In most cases,
you are provided with an API, but that’s not always plausible. So, when a website
does not provide an API, the only way to get the data from the website is to scrape it off yourself.</p>

<p>In this tutorial, we are going to build a simple scraper using PHP to extract data from Wikipedia
(I’d highly recommend you to use <a href="https://www.mediawiki.org/wiki/API:Main_page">Wikipedia API</a> over this.
This is just for the tutorial purpose.) and another scraper that extracts
Anna University result.</p>

<p><img src="/images/blog/web_scraping.jpg" alt="" /></p>

<p>There are various external libraries such as Simple HTML DOM and cURL,
which I highly recommend you to check out after this tutorial, but we are going to
proceed with simple raw PHP.</p>

<p>Before you proceed, remember that Web Scraping is definitely a gray area. So,
make sure you are not breaking terms and conditions of the site you are scraping
the data off. This tutorial is just for educational purpose.</p>

<hr />

<h2 id="simple-wikipedia-scraper">Simple Wikipedia Scraper</h2>

<p>We are going to do this in 3 simple steps:</p>

<h3 id="step-1-get-the-content">Step 1: Get the content</h3>

<p>First, we have to pull the content off the Wikipedia page. For this, we use <a href="http://php.net/manual/en/function.file-get-contents.php"><code class="highlighter-rouge">file_get_contents()</code></a>
function, which is used to retrieve the content of a file using its URL. It takes in
a URL of a file and returns its content.</p>

<script src="https://gist.github.com/AravindVasudev/b6265f6eb40a1e8979188b6967e7cfb1.js?file=print_url.php"></script>

<p>The above code returns the content of the Wikipedia page as a string which
the browser interprets as something like this:</p>

<p><img src="/images/blog/wikiscraper_1.png" alt="" /></p>

<h3 id="step-2-parse-the-string-as-dom">Step 2: Parse the string as DOM</h3>

<p>DOM stands for <a href="https://www.w3.org/TR/1998/WD-DOM-19980720/introduction.html"><code class="highlighter-rouge">Document Object Model</code></a>.
It defines the logical structure of documents and the way a document is accessed
and manipulated. In simple words, it generates a tree like structure to access the
data in it. It is used by the browser to parse HTML into displayable content.
<img src="/images/blog/dom.gif" alt="" /></p>

<p><code class="highlighter-rouge">$url</code> can be converted to DOM using <a href="http://php.net/manual/en/class.domdocument.php"><code class="highlighter-rouge">DOMDocument</code></a>
class in PHP.</p>

<p><code class="highlighter-rouge">DOMDocument's</code> constructor takes in <code class="highlighter-rouge">XML version</code> and <code class="highlighter-rouge">encoding</code> as parameters.
Don’t worry if you don’t know what they are, just use the line below:</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="vg">$dom</span>  <span class="o">=</span> <span class="kp">new</span> <span class="no">DOMDocument</span><span class="p">(</span><span class="s1">'1.0'</span><span class="p">,</span> <span class="s1">'UTF-8'</span><span class="p">);</span>
</code></pre>
</div>

<p>The <a href="http://php.net/manual/en/domdocument.loadhtml.php"><code class="highlighter-rouge">loadHTML()</code></a> method of
DOMDocument takes in the content and creates a DOM.</p>

<script src="https://gist.github.com/AravindVasudev/b6265f6eb40a1e8979188b6967e7cfb1.js?file=construct_dom.php"></script>

<p>Note: If you’re new to PHP classes, they are very similar to the ones in C++ and Java.
The only difference you have to know to continue this tutorial is that PHP uses
<code class="highlighter-rouge">-&gt;</code> instead of <code class="highlighter-rouge">.</code> to access class members.</p>

<h3 id="step-3-scrape-the-data">Step 3: Scrape the data</h3>

<p>This is the part where you have to use your brain. Since every website is not built
the same way, you have to know your way through the website’s structure. To do this,
just try going through the website’s source to determine the appropriate <code class="highlighter-rouge">selectors</code>
to crack into the data.</p>

<p>For example,
if you go through <a href="https://en.wikipedia.org/wiki/Web_scraping"><code class="highlighter-rouge">https://en.wikipedia.org/wiki/Web_scraping</code></a> ‘s
source, you can see that the title has an ID of <code class="highlighter-rouge">#firstHeading</code>.</p>

<p><img src="/images/blog/wikiscraper_2.png" alt="" /></p>

<p>We can retrieve a DOM Element with its ID using <a href="http://php.net/manual/en/domdocument.getelementbyid.php"><code class="highlighter-rouge">getElementById</code></a> method. <code class="highlighter-rouge">getElementById()</code> method returns an object of <a href="http://php.net/manual/en/class.domelement.php"><code class="highlighter-rouge">DOMElement</code></a> type.</p>

<p>The content inside a <code class="highlighter-rouge">DOMElement</code> is stored in <code class="highlighter-rouge">nodeValue</code> attribute.</p>

<script src="https://gist.github.com/AravindVasudev/b6265f6eb40a1e8979188b6967e7cfb1.js?file=print_title.php"></script>

<p><img src="/images/blog/wikiscraper_3.png" alt="" /></p>

<p>Next, We’re going to extract the first paragraph of the Wikipedia page. Going
through the source again, we can see that the first paragraph is within a <code class="highlighter-rouge">p tag</code>
inside <code class="highlighter-rouge">#mw-content-text</code>.</p>

<script src="https://gist.github.com/AravindVasudev/b6265f6eb40a1e8979188b6967e7cfb1.js?file=print_para.php"></script>

<p><a href="http://php.net/manual/en/domelement.getelementsbytagname.php"><code class="highlighter-rouge">getElementsByTagName</code></a>
rerurns a <a href="http://php.net/manual/en/class.domnodelist.php"><code class="highlighter-rouge">DOMNodeList</code></a> object,
which is a collection of <code class="highlighter-rouge">DOMElement</code> objects ordered, which can be accessed using
<code class="highlighter-rouge">item()</code> method.</p>

<p>In the example, the first paragraph is returned by <code class="highlighter-rouge">item(0)</code>. Like how we did in
the title, we extract the text using <code class="highlighter-rouge">nodeValue</code> attribute.</p>

<p><img src="/images/blog/wikiscraper_4.png" alt="" /></p>

<p>That’s it! We have successfully scraped data off the Wikipedia page.</p>

<p>Try going through the documentation to get a clearer picture. If you find the
documentation difficult, I’d recommend you to go with some library. If you have
any problem following the tutorial, please do post it in the comments below.</p>

<p><img src="/images/blog/read_the_docs.jpg" alt="" /></p>

<p>The <a href="../web-scraping-101-part2/">part 2</a> of this tutorial continues on a real world example of scraping
the Anna University website for result into an excel file. If you liked this, please do check
this out: <a href="../web-scraping-101-part2/">Web Scraping 101: Anna University Result Scraper</a></p>

  </section>
  <section id="disqus_thread"></section><!-- /#disqus_thread -->
</article>

    <script type="text/javascript">
      var disqus_config = function () {
        this.page.url = 'https://aravindvasudevan.me/2017/web-scraping-101/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = '/2017/web-scraping-101'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
      };

      (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = '//aravind-vasudev-blog.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
       })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



      </div>

      <footer class="footer">
  <span class="footer__copyright">&copy; 2017 Aravind Vasudevan. All rights reserved.</span>
</footer> 

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script type="text/javascript" src="/js/main.js"></script>

    </div>
  </body>
</html>